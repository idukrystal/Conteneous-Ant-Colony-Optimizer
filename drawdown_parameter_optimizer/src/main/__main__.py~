import random
from src.main.simulation_helper import SimulationHelper
from src.main.params import no_of_iterations, parameters
from src.main.data import test_datas
from src.main.ant import Ant
simulation_helper = SimulationHelper()
solution_archive = simulation_helper.solution_archive

simulation_helper.initialize_simulation()

ants = []

for i in range(len(test_datas)):
    ants.append(Ant(i, test_datas[i]))

for i in range(no_of_iterations):
    simulation_helper.print_solution_archive()
    print("******************")
    print()
    for ant in ants:
        solution = random.choices(solution_archive, [solution.weight for solution in solution_archive], k=1)[0]
        sds = simulation_helper.calculate_sd(solution)
        new_solution = ant.find_solution(solution, sds)
        sim_result = simulation_helper.simulator.simulate_test(new_solution)
        new_solution.update_pheromone(sim_result)
        simulation_helper.update_solution_archive(new_solution)
        


